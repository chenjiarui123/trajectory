# 20_ans 消融实验报告

**实验**: 29个 | **基线**: 22.83 | **最优**: 29.16 (+27.7%) | **日期**: 2025-11-11

---

## 核心发现

**ESM角度阈值 0.001° → 0.065° 提升 27.7%**

---

## 参数影响力

| 参数 | 影响 | 最优值 | 提升 |
|------|:----:|--------|:----:|
| **ESM角度阈值** | ⭐⭐⭐⭐⭐ | 0.060-0.070° | +27.7% |
| **RANSAC模块** | ⭐⭐⭐⭐⭐ | 开启 | -16.0% (关闭) |
| **ESM距离检查** | ⭐⭐⭐⭐⭐ | 200km | -35.7% (150km) |
| 插值迭代次数 | ⭐⭐⭐ | 5轮 | +1.2% |
| ESM合并模块 | ⭐⭐⭐ | 开启 | -2.5% (关闭) |
| 去重模块 | ⭐ | 关闭 | +0.3% |
| 去重距离 | - | 任意 | 0% |
| ESM速度阈值 | - | 任意 | 0% |

---

## ESM角度阈值数据

| 角度 | 得分 | 提升 | 趋势 |
|:----:|:----:|:----:|:----:|
| **0.060°** | **29.16** | **+27.7%** | ⭐ 最优 |
| **0.070°** | **29.16** | **+27.7%** | ⭐ 最优 |
| 0.050° | 29.15 | +27.7% | ✅ |
| 0.045° | 29.12 | +27.5% | ✅ |
| 0.040° | 29.09 | +27.4% | ✅ |
| 0.080° | 29.00 | +27.0% | ⚠️ 下降 |
| 0.030° | 28.79 | +26.1% | ✅ |
| 0.020° | 27.93 | +22.3% | ✅ |
| 0.010° | 27.01 | +18.3% | ✅ |
| **0.001°** | **22.83** | **0%** | 基线 |
| 0.0005° | 22.49 | -1.5% | ❌ |

**趋势**: 0.001°→0.030° 快速上升 → 0.030°→0.070° 平台期(最优) → 0.070°+ 缓慢下降

---

## 最优配置

```python
optimal_config = {
    'esm_angle_threshold': 0.065,      # ⭐⭐⭐ 关键参数
    'enable_deduplication': False,     # ⭐ 关闭去重
    'iteration_rounds': 5,             # ⭐ 5轮迭代
    'enable_ransac': True,             # ⭐⭐⭐ 必须开启
    'enable_esm_merge': True,          # ⭐ 必须开启
    'esm_check_distance': 200000,      # 保持200km
    'safe_distance': 200,
    'esm_speed_threshold': 1000,
    'update_distance': 600,
    'update_speed': 800,
    'update_angle': 90,
    'ransac_distance': 500,
    'ransac_min_points': 5,
}
```

**预期得分**: ~29.5 (提升 ~29%)

---

## 关键结论

1. **ESM角度阈值 0.065°** - 最关键优化 (+27.7%)
2. **RANSAC必须开启** - 关闭损失16%
3. **ESM距离检查≥200km** - 150km损失35.7%
4. **关闭去重** - 小幅提升0.3%
5. **5轮迭代** - 提升1.2%

---

## 快速应用

修改 `our_ans/20_ans/preprocess.py`:
```python
# Line 228: 修改角度阈值
if abs(angle_diff) < 0.065:  # 原: 0.001

# Line 108: 注释掉去重
# deduplacate_radar_points_updated = dedumplacate(...)
```

修改 `our_ans/20_ans/simple_interpolation.py`:
```python
# Line 230: 修改迭代次数
nrand = 5  # 原: 3
```

或运行: `python our_ans/run_optimal.py`
